<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Comet AI Browser Chat</title>
    <link rel="stylesheet" href="chat.css">
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/highlight.js/11.9.0/styles/github-dark.min.css">
</head>
<body>
    <div class="chat-container">
        <!-- Header -->
        <header class="chat-header">
            <div class="header-left">
                <svg class="comet-icon" width="24" height="24" viewBox="0 0 24 24" fill="none" xmlns="http://www.w3.org/2000/svg">
                    <path d="M12 2L2 7L12 12L22 7L12 2Z" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"/>
                    <path d="M2 17L12 22L22 17" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"/>
                    <path d="M2 12L12 17L22 12" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"/>
                </svg>
                <h1>Comet AI Browser</h1>
            </div>
            <div class="header-right">
                <select id="model-selector" class="model-dropdown">
                    <option value="llama2">Llama 2</option>
                    <option value="mistral">Mistral</option>
                    <option value="codellama">Code Llama</option>
                    <option value="neural-chat">Neural Chat</option>
                </select>
                <button id="clear-chat" class="icon-button" title="Clear Chat">
                    <svg width="16" height="16" viewBox="0 0 16 16">
                        <path fill="currentColor" d="M10 3h3v1h-1v9l-1 1H4l-1-1V4H2V3h3V2a1 1 0 0 1 1-1h3a1 1 0 0 1 1 1v1zM9 2H6v1h3V2zM4 13h7V4H4v9zm2-8H5v7h1V5zm1 0h1v7H7V5zm2 0h1v7H9V5z"/>
                    </svg>
                </button>
                <button id="settings-button" class="icon-button" title="Settings">
                    <svg width="16" height="16" viewBox="0 0 16 16">
                        <path fill="currentColor" d="M3.5 2h-1v5h1V2zm6.1 5H6.4L6 6.45v-1L6.4 5h3.2l.4.5v1l-.4.5zm-5 3H1.4L1 9.5v-1l.4-.5h3.2l.4.5v1l-.4.5zm3.9-8h-1v2h1V2zm-1 6h1v6h-1V8zm-4 3h-1v3h1v-3zm7.9 0h3.19l.4-.5v-.95l-.4-.5H11.4l-.4.5v.95l.4.5zm2.1-9h-1v6h1V2zm-1 10h1v2h-1v-2z"/>
                    </svg>
                </button>
            </div>
        </header>

        <!-- Chat Messages Area -->
        <div class="chat-messages" id="chat-messages">
            <div class="welcome-message">
                <div class="welcome-icon">
                    <svg width="48" height="48" viewBox="0 0 24 24" fill="none" xmlns="http://www.w3.org/2000/svg">
                        <path d="M12 2L2 7L12 12L22 7L12 2Z" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"/>
                        <path d="M2 17L12 22L22 17" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"/>
                        <path d="M2 12L12 17L22 12" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"/>
                    </svg>
                </div>
                <h2>Welcome to Comet AI Browser</h2>
                <p>Your intelligent browsing assistant powered by local LLMs</p>
                <div class="quick-commands">
                    <h3>Try these commands:</h3>
                    <button class="quick-cmd" data-command="Browse to https://github.com">Browse to GitHub</button>
                    <button class="quick-cmd" data-command="Search for AI news">Search for AI news</button>
                    <button class="quick-cmd" data-command="Take a screenshot">Take a screenshot</button>
                    <button class="quick-cmd" data-command="Summarize this page">Summarize this page</button>
                </div>
            </div>
        </div>

        <!-- Input Area -->
        <div class="chat-input-container">
            <div class="chat-input-wrapper">
                <button class="attach-button" title="Attach context">
                    <svg width="16" height="16" viewBox="0 0 16 16">
                        <path fill="currentColor" d="M10.5 3.5a2.5 2.5 0 0 1 0 5h-5a1 1 0 0 1 0-2h5a.5.5 0 0 0 0-1h-5a2 2 0 0 0 0 4h5a3.5 3.5 0 1 0 0-7h-5a1 1 0 0 0 0 2h5z"/>
                    </svg>
                </button>
                <textarea 
                    id="chat-input" 
                    class="chat-input" 
                    placeholder="Ask Comet AI anything or use commands like 'browse to', 'search for', 'click on'..."
                    rows="1"
                ></textarea>
                <button id="send-button" class="send-button" title="Send message">
                    <svg width="16" height="16" viewBox="0 0 16 16">
                        <path fill="currentColor" d="M2.5 2l11 6-11 6V9.5l8-1.5-8-1.5V2z"/>
                    </svg>
                </button>
            </div>
            <div class="input-footer">
                <span class="model-info">Using <span id="current-model">Llama 2</span> via Ollama</span>
                <span class="status-indicator">
                    <span class="status-dot" id="status-dot"></span>
                    <span id="status-text">Ready</span>
                </span>
            </div>
        </div>
    </div>

    <!-- Settings Modal -->
    <div id="settings-modal" class="modal">
        <div class="modal-content">
            <div class="modal-header">
                <h2>Settings</h2>
                <button class="close-button" id="close-settings">
                    <svg width="16" height="16" viewBox="0 0 16 16">
                        <path fill="currentColor" d="M8 8.707l3.646 3.647.708-.707L8.707 8l3.647-3.646-.707-.708L8 7.293 4.354 3.646l-.707.708L7.293 8l-3.646 3.646.707.708L8 8.707z"/>
                    </svg>
                </button>
            </div>
            <div class="modal-body">
                <div class="setting-group">
                    <label for="ollama-url">Ollama API URL</label>
                    <input type="text" id="ollama-url" value="http://localhost:11434" placeholder="http://localhost:11434">
                </div>
                <div class="setting-group">
                    <label for="api-url">Comet API URL</label>
                    <input type="text" id="api-url" value="http://localhost:5000" placeholder="http://localhost:5000">
                </div>
                <div class="setting-group">
                    <label>
                        <input type="checkbox" id="auto-execute" checked>
                        Auto-execute browser commands
                    </label>
                </div>
                <div class="setting-group">
                    <label>
                        <input type="checkbox" id="show-thinking" checked>
                        Show AI thinking process
                    </label>
                </div>
                <div class="setting-group">
                    <label for="temperature">Temperature: <span id="temp-value">0.7</span></label>
                    <input type="range" id="temperature" min="0" max="1" step="0.1" value="0.7">
                </div>
            </div>
            <div class="modal-footer">
                <button id="save-settings" class="primary-button">Save Settings</button>
            </div>
        </div>
    </div>

    <script src="https://cdnjs.cloudflare.com/ajax/libs/marked/11.1.1/marked.min.js"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/highlight.js/11.9.0/highlight.min.js"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/dompurify/3.0.8/purify.min.js"></script>
    <script src="chat.js"></script>
</body>
</html>
